# ============================================================================
# Production Configuration
# ============================================================================
# All sensitive values are loaded from environment variables (injected from
# AWS Secrets Manager via ECS task definition)
# ============================================================================

spring.application.name=mongo

# Logging - less verbose in production
logging.level.root=WARN
logging.level.io.bharat.mongo=INFO

# MongoDB connection (from Secrets Manager)
spring.data.mongodb.host=${MONGO_HOST}
spring.data.mongodb.port=${MONGO_PORT:27017}
spring.data.mongodb.database=${MONGO_DATABASE:mydatabase}
spring.data.mongodb.username=${MONGO_USERNAME}
spring.data.mongodb.password=${MONGO_PASSWORD}
spring.data.mongodb.authentication-database=${MONGO_AUTH_DB:admin}

# DocumentDB requires TLS - add connection options
spring.data.mongodb.uri=mongodb://${MONGO_USERNAME}:${MONGO_PASSWORD}@${MONGO_HOST}:${MONGO_PORT}/${MONGO_DATABASE}?tls=true&tlsCAFile=/app/rds-combined-ca-bundle.pem&replicaSet=rs0&readPreference=secondaryPreferred&retryWrites=false

# JWT Configuration (from Secrets Manager)
security.jwt.secret=${JWT_SECRET}
security.jwt.expiration-ms=${JWT_EXPIRATION_MS:3600000}
security.jwt.refresh-expiration-ms=${JWT_REFRESH_EXPIRATION_MS:86400000}

# Auth credentials (from Secrets Manager)
security.auth.username=${AUTH_USERNAME}
security.auth.password=${AUTH_PASSWORD}

# Actuator endpoints for health checks
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized
management.health.mongo.enabled=true

# Server configuration
server.port=8080
server.shutdown=graceful
spring.lifecycle.timeout-per-shutdown-phase=30s

